# CLIMBER Core Message Defintions

imports: null

constants:
  CC_MAX_LOG_LENGTH: 1024

string_constants: null

aliases: null

host_ids: null

module_ids:
  CC_TRIAL_MANAGER: 17 # Core Trial Manager

# Non-message structured data (no id field)
struct_defs: null

# Message Definitions
message_defs:
  CC_CONFIG_SUBJECT:
    id: 500
    fields:
      subject_id: char[64]
  
  CC_INIT_SESS:
    id: 501
    fields:
      session_type: char[128]

  CC_SESS_METADATA:
    id: 502
    fields:
      session_type: char[128]
      subject_id: char[64]
      sess_path: char[512]
      session_num: int
      reserved: int

  CC_CLOSE_SESS:
    id: 503
    fields: null

  CC_START_SET:
    id: 504
    fields: null

  CC_SET_NUM:
    id: 505
    fields:
      set_num: int

  CC_END_SET:
    id: 506
    fields: null

  CC_START_BLOCK:
    id: 507
    fields: null

  CC_BLOCK_NUM:
    id: 508
    fields:
      block_num: int

  CC_END_BLOCK:
    id: 509
    fields: null

  CC_START_TRIAL:
    id: 510
    fields: null

  CC_TRIAL_METADATA:
    id: 511
    fields:
      subject_id: char[64]
      session_type: char[128]
      sess_path: char[512]
      session_num: int
      set_num: int
      block_num: int
      trial_num: int
      rep_num: int
      reserved: int

  CC_END_TRIAL:
    id: 512
    fields: null

  CC_START_REP:
    id: 513
    fields: null

  CC_REP_NUM:
    id: 514
    fields:
      rep_num: int

  CC_END_REP:
    id: 515
    fields: null

  CC_METADATA_REQ:
    id: 516
    fields: null

  CC_METADATA_REP:
    id: 517
    fields:
      subject_id: char[64]
      session_type: char[128]
      sess_path: char[512]
      session_num: int
      set_num: int
      block_num: int
      trial_num: int
      rep_num: int
      session_active: int
      set_active: int16
      block_active: int16
      trial_active: int16
      rep_active: int16

  CC_LOG:
    id: 550
    fields: # based on python LogRecord
      time: double # time of log, from time.time() (unix time)
      level: int # 0 NOTSET, 10 DEBUG, 20 INFO, 30 WARNING, 40 ERROR, 50 CRITICAL
      lineno: int # source code line number where message was logged
      name: char[128] # name of the logger or module
      pathname: char[512] # name of source file
      funcname: char[256] # name of function making log
      message: char[CC_MAX_LOG_LENGTH] # formatted message
